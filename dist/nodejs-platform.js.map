{"version":3,"sources":["nodejs-platform.ts"],"names":[],"mappings":";;AAeA;IAEE,YAAmB,MAAe,EAAS,KAAY;QAApC,WAAM,GAAN,MAAM,CAAS;QAAS,UAAK,GAAL,KAAK,CAAO;QAOvD;;UAEE;QACF,SAAI,GAAa,GAAG,EAAE,GAAG,CAAC,CAAC;QATzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;QAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC;IACnD,CAAC;IAkBD;;;;MAIE;IACF,qBAAqB,CAAC,QAA+C;QACnE,OAAO,YAAY,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC;IAED;;;MAGE;IACF,UAAU,CAAC,QAAiD;QAC1D,sBAAsB;IACxB,CAAC;IACD;;;;;MAKE;IACF,gBAAgB,CAAC,SAAiB,EAAE,QAA4C,EAAE,OAAiB;QACjG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IAC7D,CAAC;IACD;;;;;MAKE;IACF,mBAAmB,CAAC,SAAiB,EAAE,QAA4C,EAAE,OAAiB;QACpG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IAChE,CAAC;CAMF;AAhED,wCAgEC","file":"nodejs-platform.js","sourcesContent":["import { IPlatform } from './platform';\nimport { IPerformance } from './performance';\nimport { IGlobal } from './global';\nimport { JSDOM } from 'jsdom';\n\ndeclare module './global' {\n  interface IGlobal {\n    performance: any;\n    location: any;\n    history: any;\n    addEventListener(eventName: string, callback: EventListenerOrEventListenerObject, capture?: boolean): void;\n    removeEventListener(eventName: string, callback: EventListenerOrEventListenerObject, capture?: boolean): void;\n  }\n}\n\nexport class NodeJsPlatform implements IPlatform {\n\n  constructor(public global: IGlobal, public jsdom: JSDOM) {\n    this.performance = this.global.performance;\n    this.location = this.global.location;\n    this.history = this.global.history;\n    this.XMLHttpRequest = this.global.XMLHttpRequest;\n  }\n\n  /**\n  * A function wich does nothing.\n  */\n  noop: Function = () => { };\n  /**\n  * The runtime's location API.\n  */\n  location: Object;\n  /**\n  * The runtime's history API.\n  */\n  history: Object;\n  /**\n  * The runtime's performance API\n  */\n  performance: IPerformance;\n  /**\n  * Registers a function to call when the system is ready to update (repaint) the display.\n  * @param callback The function to call.\n  * @return A long integer value, the request id, that uniquely identifies the entry in the callback list.\n  */\n  requestAnimationFrame(callback: (animationFrameStart: number) => void): number {\n    return setImmediate(callback);\n  }\n\n  /**\n  * Iterate all modules loaded by the script loader.\n  * @param callback A callback that will receive each module id along with the module object. Return true to end enumeration.\n  */\n  eachModule(callback: (key: string, value: Object) => boolean): void {\n    //TODO: What is this? \n  }\n  /**\n  * Add a global event listener.\n  * @param eventName A string representing the event type to listen for.\n  * @param callback The function that receives a notification when an event of the specified type occurs.\n  * @param capture If true, useCapture indicates that the user wishes to initiate capture.\n  */\n  addEventListener(eventName: string, callback: EventListenerOrEventListenerObject, capture?: boolean): void {\n    this.global.addEventListener(eventName, callback, capture);\n  }\n  /**\n  * Remove a global event listener.\n  * @param eventName A string representing the event type to listen for.\n  * @param callback The function to remove from the event.\n  * @param capture Specifies whether the listener to be removed was registered as a capturing listener or not.\n  */\n  removeEventListener(eventName: string, callback: EventListenerOrEventListenerObject, capture?: boolean): void {\n    this.global.removeEventListener(eventName, callback, capture);\n  }\n\n  /**\n  * The runtime's XMLHttpRequest API.\n  */\n  XMLHttpRequest: typeof XMLHttpRequest;\n}\n"],"sourceRoot":"../src/"}